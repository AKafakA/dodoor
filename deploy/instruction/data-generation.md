## Data generation

We describe how to extract and generate testing data for the Dodoor evaluation.

Currently, there exist 3 dataset supposed to be supported by Dodoor. All of these dataset will be handled by the scripts as 

```angular2html
deploy/python/scripts/generate_data.py --target_qps 10.0 --num_records 100
``` 
All supported dataset will be read and generated following possession distribution under target QPS.
Different dataset also have some specific parameters, which described below.

1. **Azure Cloud Virtual Machine (VM) data**: 
    
This dataset is used to evaluate the performance of Dodoor on placing Azure VMs.
The raw dataset released by Microsoft is available at [Azure VM dataset](https://github.com/Azure/AzurePublicDataset/blob/master/AzureTracesForPacking2020.md) as Sqlite format.
It include the VM request including the timeline of start and end time, the resource ratio on different hosts.

We allow to specify the maxima resources in single host (e.g --max_cores) to convert the resource ratio to actual resource requirements.
And the maxima duration used to filter the VM requests that are too long to be placed on a single host.

2. **Huawei Serverless Trace**:

This dataset is used to evaluate the performance of Dodoor on placing Huawei Serverless functions.
The raw dataset released by Huawei is available at [Huawei Serverless Trace](https://github.com/sir-lab/data-release/blob/main/README_data_release_2023.md).
It includes the function type csv files, which contains 200 function type and the resource requirements.
And also the function request csv files, which contains the function request including the frequency of each function in a 1-minute interval.

We have copied the day-1 data from the original dataset to `deploy/resources/data/huawei_serverless_trace/` for testing.
And allow to specify the top-k function types to be used in the evaluation as `--serverless_num_functions`
Once the target QPS is specified, It will generate the target QPS function request with the top-k function types based on the frequency distribution.

3. **Function Bench**:
Both the serverless and VM dataset are using the stress-ng command to simulate the function execution with specified resource requirements and duration is accurate.
To test with the real function execution, we can use the Function Bench dataset. 
And the raw function beach is introduced in (Function Bench)[https://github.com/ddps-lab/serverless-faas-workbench?tab=readme-ov-file], which target to benchmark the function execution at cloud service.
We did the modification to the original function to allow it running on the local physical with or without docker. And provide the profiling script to generate the resource requirements and execution time estimation.
More details can be found in the configuration generation section.
And when testing on Dodoor, they are supposed to executed with docker.
The data generation script will read the function beach related configuration generated by the configuration generation section and then produce the trace with target QPS and number of records.